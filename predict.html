<script>
const PLAYERS = ['BILLY','CROSBO','INGZ','KABZ','KIT','LOCKY','STOOBZ','T-CITY'];
const PLAYER_NEON = {
  'BILLY':'#ff007f','CROSBO':'#00f2ff','INGZ':'#00ff7f','KABZ':'#ffd400',
  'KIT':'#ff00ff','LOCKY':'#00ffff','STOOBZ':'#ff7700','T-CITY':'#77ff00'
};
const FIXTURES = [
  {home:'Man Utd', away:'Man City'},
  {home:'Chelsea', away:'Brentford'},
  {home:'Leeds', away:'Fulham'},
  {home:'Liverpool', away:'Burnley'},
  {home:'Sunderland', away:'Palace'},
  {home:'Tottenham', away:'West Ham'},
  {home:'Forest', away:'Arsenal'},
  {home:'Wolves', away:'Newcastle'},
  {home:'Aston Villa', away:'Everton'},
  {home:'Brighton', away:'Bournemouth'}
];
const TOTAL_WEEKS = 17;

const navContainer = document.querySelector('.player-nav');
const playersContainer = document.getElementById('players');
const navButtons = {};

// create player areas and nav buttons
PLAYERS.forEach(player=>{
  // Nav button
  const btn = document.createElement('button');
  btn.textContent = player;
  btn.style.background = PLAYER_NEON[player];
  btn.addEventListener('click',()=>document.getElementById('player-'+player).scrollIntoView({behavior:'smooth', block:'start'}));
  navContainer.appendChild(btn);
  navButtons[player] = btn;

  // Player area
  const container = document.createElement('div');
  container.className = 'player-area';
  container.id = 'player-'+player;
  container.style.borderColor = PLAYER_NEON[player];
  container.innerHTML = `
    <div class="player-title">
      <div>
        <div class="player-name">${player}</div>
        <div class="subtle">FIXTURES - NEXT GAME WEEK</div>
      </div>
      <div class="player-total">TOTAL: <span id="${player}-total">0</span></div>
    </div>
    <div class="fixtures"></div>
    <div class="picked-list"><strong>YOU HAVE PICKED THESE PLAYERS — YOU ARE NOT PERMITTED TO PICK THEM AGAIN</strong><div id="${player}-pickedList"><em style="color:#777">No players picked yet</em></div></div>
    <div class="points-grid">
      <table><thead><tr>
        <th>Week</th><th>Team pick (opp)</th><th>Team pts</th><th>Player pick</th><th>Player pts</th><th>Week total</th>
      </tr></thead><tbody id="${player}-tbody"></tbody></table>
    </div>`;
  playersContainer.appendChild(container);

  const fixturesDiv = container.querySelector('.fixtures');
  FIXTURES.forEach(f=>{
    const homeBox = document.createElement('div');
    homeBox.className = 'team-box';
    homeBox.textContent = f.home;
    homeBox.style.background = PLAYER_NEON[player];
    const awayBox = document.createElement('div');
    awayBox.className = 'team-box';
    awayBox.textContent = f.away;
    awayBox.style.background = PLAYER_NEON[player];
    fixturesDiv.appendChild(homeBox);
    const vs = document.createElement('div'); vs.textContent='v'; vs.style.alignSelf='center'; vs.style.padding='0 6px'; vs.style.color='#666'; vs.style.fontWeight=700;
    fixturesDiv.appendChild(vs);
    fixturesDiv.appendChild(awayBox);
    const spacer = document.createElement('div'); spacer.style.flexBasis='100%'; spacer.style.height='8px'; fixturesDiv.appendChild(spacer);
  });

  const tbody = container.querySelector('tbody');
  for(let w=1; w<=TOTAL_WEEKS; w++){
    const tr = document.createElement('tr');
    tr.innerHTML=`<td>${w}</td><td class="team" style="color:#999">—</td><td style="color:#999">—</td><td style="color:#999">—</td><td style="color:#999">—</td><td style="color:#999">—</td>`;
    tbody.appendChild(tr);
  }
});

// Submit pick
document.getElementById('submitPick').addEventListener('click', ()=>{
  const name=document.getElementById('top-name').value;
  const team=document.getElementById('top-team').value;
  const player=document.getElementById('top-player').value.trim();
  if(!name||!team||!player){ alert('PLEASE SELECT YOUR NAME, TEAM FOR THE WEEK, AND ENTER A PLAYER.'); return; }
  alert(`PICK SUBMITTED:\n${name} — ${team} — ${player}\n(Front-end demo only)`);
});

// Scroll spy for nav buttons
const observer = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      const player = entry.target.id.replace('player-','');
      Object.values(navButtons).forEach(btn=>btn.classList.remove('active'));
      navButtons[player].classList.add('active');
    }
  });
},{threshold:0.5});

PLAYERS.forEach(player=>{
  observer.observe(document.getElementById('player-'+player));
});
</script>
